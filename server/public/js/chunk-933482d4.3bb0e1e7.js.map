{"version":3,"sources":["webpack:///./src/components/LoginForm.vue","webpack:///./src/components/LoginForm.vue?dc33","webpack:///./src/components/LoginForm.vue?0939"],"names":["class","submitForm","label","id","error","errors","user","removeError","type","password","loading","buttonLoading","link","resetPasswordLink","title","open","modal","closeModal","message","data","name","methods","field","this","openModal","validateForm","options","method","credentials","headers","body","JSON","stringify","fetch","then","res","json","ok","$store","dispatch","$router","push","catch","console","log","finally","__exports__","render"],"mappings":"0JAEgB,S,iBAgB0B,a,6OAjBxC,eAuBO,QAvBDA,MAAM,OAAQ,SAAM,8CAAU,EAAAC,YAAA,EAAAA,WAAA,qBAAU,e,CAC5C,eAA8B,Q,wBAAlB,iBAAK,C,YACjB,eAMgB,GALdC,MAAM,WACNC,GAAG,OACFC,MAAO,EAAAC,OAAOC,K,WACN,EAAAA,K,qDAAA,EAAAA,KAAI,IACZ,cAAY,+BAAE,EAAAC,YAAW,W,+BAE5B,eAOgB,GANdL,MAAM,WACNC,GAAG,WACHK,KAAK,WACJJ,MAAO,EAAAC,OAAOI,S,WACN,EAAAA,S,qDAAA,EAAAA,SAAQ,IAChB,cAAY,+BAAE,EAAAF,YAAW,e,+BAE5B,eAA6D,GAA/CG,QAAS,EAAAC,eAAa,C,wBAAE,iBAAS,C,0BAC/C,eAIa,GAHXX,MAAM,aACNE,MAAM,sBACLU,KAAM,EAAAC,mB,sBAGX,eAEe,GAFHC,MAAM,SAAUC,KAAM,EAAAC,MAAMD,KAAO,aAAa,EAAAE,Y,yBAAY,iBAEtE,C,8BADA,EAAAD,MAAME,SAAO,O,mDAKF,GACbC,KADa,WAEX,MAAO,CACLb,KAAM,GACNG,SAAU,GACVI,kBAAmB,CAAEO,KAAM,mBAC3BT,eAAe,EACfN,OAAQ,CACNC,MAAM,EACNG,UAAU,GAEZO,MAAO,CACLD,MAAM,EACNG,QAAS,MAIfG,QAAS,CACPd,YADO,SACKe,GACVC,KAAKlB,OAAOiB,IAAS,GAEvBE,UAJO,SAIGN,GACJA,IACFK,KAAKP,MAAME,QAAUA,GAEvBK,KAAKP,MAAMD,MAAO,GAEpBE,WAVO,WAWLM,KAAKP,MAAMD,MAAO,GAEpBU,aAbO,WAoBL,OANKF,KAAKjB,OACRiB,KAAKlB,OAAOC,MAAO,GAEhBiB,KAAKd,WACRc,KAAKlB,OAAOI,UAAW,GAElBc,KAAKjB,MAAQiB,KAAKd,UAE3BR,WAtBO,WAsBM,WACX,GAAKsB,KAAKE,eAAV,CAGA,IAAMN,EAAO,CAAEb,KAAMiB,KAAKjB,KAAMG,SAAUc,KAAKd,UACzCiB,EAAU,CACdC,OAAQ,OACRC,YAAa,UACbC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUb,IAEvBI,KAAKZ,eAAgB,EACrBsB,MAAM,GAAD,OAAI,wBAAJ,kBAA6CP,GAC/CQ,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACC,GACDA,EAAIE,IACN,EAAKC,OAAOC,SAAS,wBACrB,EAAKC,QAAQC,KAAK,WAElB,EAAKjB,UAAUW,EAAIjB,YAGtBwB,OAAM,SAACtC,GACNuC,QAAQC,IAAIxC,MAEbyC,SAAQ,WACP,EAAKlC,eAAgB,S,iCC3F/B,MAAMmC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,oCCTf,W","file":"js/chunk-933482d4.3bb0e1e7.js","sourcesContent":["<template>\n  <form class=\"form\" @submit.prevent=\"submitForm\">\n    <base-title>Login</base-title>\n    <base-textbox\n      label=\"Benutzer\"\n      id=\"user\"\n      :error=\"errors.user\"\n      v-model=\"user\"\n      @remove-error=\"removeError('user')\"\n    ></base-textbox>\n    <base-textbox\n      label=\"Passwort\"\n      id=\"password\"\n      type=\"password\"\n      :error=\"errors.password\"\n      v-model=\"password\"\n      @remove-error=\"removeError('password')\"\n    ></base-textbox>\n    <base-button :loading=\"buttonLoading\">Einloggen</base-button>\n    <base-link\n      class=\"form__link\"\n      label=\"Passwort vergessen?\"\n      :link=\"resetPasswordLink\"\n    ></base-link>\n  </form>\n  <base-modal title=\"Fehler\" :open=\"modal.open\" @close-modal=\"closeModal\">{{\n    modal.message\n  }}</base-modal>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      user: \"\",\n      password: \"\",\n      resetPasswordLink: { name: \"forgot-password\" },\n      buttonLoading: false,\n      errors: {\n        user: false,\n        password: false,\n      },\n      modal: {\n        open: false,\n        message: \"\",\n      },\n    };\n  },\n  methods: {\n    removeError(field) {\n      this.errors[field] = false;\n    },\n    openModal(message) {\n      if (message) {\n        this.modal.message = message;\n      }\n      this.modal.open = true;\n    },\n    closeModal() {\n      this.modal.open = false;\n    },\n    validateForm() {\n      if (!this.user) {\n        this.errors.user = true;\n      }\n      if (!this.password) {\n        this.errors.password = true;\n      }\n      return this.user && this.password;\n    },\n    submitForm() {\n      if (!this.validateForm()) {\n        return;\n      }\n      const data = { user: this.user, password: this.password };\n      const options = {\n        method: \"POST\",\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      };\n      this.buttonLoading = true;\n      fetch(`${process.env.VUE_APP_API}/account/login`, options)\n        .then((res) => res.json())\n        .then((res) => {\n          if (res.ok) {\n            this.$store.dispatch(\"authentication/login\");\n            this.$router.push(\"/admin\");\n          } else {\n            this.openModal(res.message);\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        })\n        .finally(() => {\n          this.buttonLoading = false;\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@use \"../styles/index.scss\" as *;\n.form {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  &__link {\n    align-self: center;\n    margin-top: 1.5rem;\n  }\n}\n</style>\n","import { render } from \"./LoginForm.vue?vue&type=template&id=cb53302c&scoped=true\"\nimport script from \"./LoginForm.vue?vue&type=script&lang=js\"\nexport * from \"./LoginForm.vue?vue&type=script&lang=js\"\n\nimport \"./LoginForm.vue?vue&type=style&index=0&id=cb53302c&lang=scss&scoped=true\"\n\nimport exportComponent from \"/mnt/c/Users/danie/_data/projects/knowledge-cafe/client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-cb53302c\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LoginForm.vue?vue&type=style&index=0&id=cb53302c&lang=scss&scoped=true\""],"sourceRoot":""}